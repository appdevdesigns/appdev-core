/*[global-shim-start]*/
!function(exports,global){var origDefine=global.define,get=function(e){var o,l=e.split("."),n=global;for(o=0;o<l.length&&n;o++)n=n[l[o]];return n},modules=global.define&&global.define.modules||global._define&&global._define.modules||{},ourDefine=global.define=function(e,o,l){var n;"function"==typeof o&&(l=o,o=[]);var r,t=[];for(r=0;r<o.length;r++)t.push(exports[o[r]]?get(exports[o[r]]):modules[o[r]]||get(o[r]));if(!o.length&&l.length){n={exports:{}};var i=function(e){return exports[e]?get(exports[e]):modules[e]};t.push(i,n.exports,n)}else t[0]||"exports"!==o[0]?t[0]||"module"!==o[0]||(t[0]={id:e}):(n={exports:{}},t[0]=n.exports,"module"===o[1]&&(t[1]=n));global.define=origDefine;var a=l?l.apply(null,t):void 0;global.define=ourDefine,modules[e]=n&&n.exports?n.exports:a};global.define.orig=origDefine,global.define.modules=modules,global.define.amd=!0,ourDefine("@loader",[],function(){var noop=function(){};return{get:function(){return{prepareGlobal:noop,retrieveGlobal:noop}},global:global,__exec:function(__load){eval("(function() { "+__load.source+" \n }).call(global);")}}})}({},window);
/*appdev/ad*/
define("appdev/ad",["module","@loader"],function(e,i){i.get("@@global-helpers").prepareGlobal(e.id,[]);var n=i.global.define,l=i.global.require,o='function versionCompare(e,n,i){function l(e){return(o?/^\\d+[A-Za-z]*$/:/^\\d+$/).test(e)}var o=i&&i.lexicographical,r=i&&i.zeroExtend,a=e.split("."),t=n.split(".");if(!a.every(l)||!t.every(l))return NaN;if(r){for(;a.length<t.length;)a.push("0");for(;t.length<a.length;)t.push("0")}o||(a=a.map(Number),t=t.map(Number));for(var u=0;u<a.length;++u){if(t.length==u)return 1;if(a[u]!=t[u])return a[u]>t[u]?1:-1}return a.length!=t.length?-1:0}"undefined"==typeof window.AD&&(AD={},AD.controllers={},AD.models={},AD.models_base={},AD.widgets={},AD.classes={},AD.ui={},AD.defaults=function(e,n){if(n)for(var i in n)e[i]=n[i];return e},AD.ui.bootup={},AD.ui.bootup.requireSeries=function(e){var n=document.getElementsByTagName("link"),i=function(e){if(e.cond)return e.cond();for(var i=0;i<n.length;i++)if(-1!=n[i].href.indexOf(e.tag))return!0;return!1},l=[];e.forEach(function(e){var n=[];e.forEach(function(e){i(e)||n.push(e.lib)}),n.length>0&&l.push(n)});var o=function(e){e>=l.length||(console.log("loading series:"),console.log(l[e]),steal.apply(steal,l[e]).then(function(){o(e+1)}))};o(0)},AD.util={},AD.util.versionCompare=versionCompare,AD.ui._resolveConflict=!1,AD.ui.loading={},AD.ui.loading.attach=function(e){if(AD.ui.loading._el=null,AD.ui.loading.reset(),"undefined"!=typeof document.querySelector){var n=document.querySelector(e);if(n){n.innerHTML=\'<span class="app-progressbar-text"></span><div class="app-progressbar"><div class="app-progressbar-inner" ></div></div>\',AD.ui.loading._el=n;var i=n.querySelector(".app-progressbar-inner");i&&(i.style.width="0%")}}},AD.ui.loading.text=function(e){null==AD.ui.loading._el?console.log("Calling AD.ui.loading.text() before AD.ui.loading.attach()."):"undefined"!=typeof AD.ui.loading._el.querySelector&&(AD.ui.loading._el.querySelector(".app-progressbar-text").innerHTML=e)},AD.ui.loading.reset=function(){AD.ui.loading._total=0,AD.ui.loading._current=0},AD.ui.loading.resources=function(e){null==AD.ui.loading._el?console.warn("Calling AD.ui.loading.resources() before AD.ui.loading.attach()!  Why?"):(AD.ui.loading._total+=e,AD.ui.loading._recalc())},AD.ui.loading.completed=function(e){null==AD.ui.loading._el?console.warn("Calling AD.ui.loading.complete() before AD.ui.loading.attach()! Why?"):(AD.ui.loading._current+=e,AD.ui.loading._recalc())},AD.ui.loading._recalc=function(){if(null==AD.ui.loading._el)console.warn("Calling AD.ui.loading._recalc() before AD.ui.loading.attach()! Why?");else if(AD.ui.loading._total>0){var e=AD.ui.loading._current/AD.ui.loading._total*100;if("undefined"!=typeof AD.ui.loading._el.querySelector){var n=AD.ui.loading._el.querySelector(".app-progressbar-inner");n&&(n.style.width=e+"%")}}});';return i.global.define=void 0,i.global.module=void 0,i.global.exports=void 0,i.__exec({source:o,address:e.uri}),i.global.require=l,i.global.define=n,i.get("@@global-helpers").retrieveGlobal(e.id,void 0)});
/*appdev/appdev*/
function loadCanJsFiles(){AD.ui.loading.attach(),AD.ui.loading.text("initializing appdev library"),AD.ui.loading.resources(21),define("appdev/appdev",["can/can","can/view/ejs/ejs","can/construct/super/super"],function(){resolveConflictJquery()})}function resolveConflictJquery(){AD.ui.loading.completed(3),AD.ui.jQuery=window.jQuery,AD.ui._resolveConflict&&(console.log(" .... trying to not conflict with existing jQuery"),$.noConflict()),AD.ui.loading.completed(18),console.log("AD setup done ..."),loadAppdevJsFiles()}function loadAppdevJsFiles(){define("appdev/appdev",["appdev/comm/hub","appdev/error/log","appdev/util/uuid","appdev/util/async","appdev/util/string","appdev/config/config","appdev/util/uiScrollbarSize","appdev/config/data","appdev/model/model","appdev/labels/lang","appdev/labels/label","appdev/comm/service","appdev/comm/socket","appdev/auth/reauth","appdev/UIController","appdev/control/control","appdev/widgets/ad_icon_busy/ad_icon_busy","appdev/widgets/ad_ui_reauth/ad_ui_reauth","site/labels/appdev"],function(e){AD.ui.loading.completed(18),console.log("AD setup done ...")})}define("appdev/appdev",["jquery","appdev/loading.css!$css","appdev/ad"],function(){loadCanJsFiles()});
/*appdev/comm/hub*/
define("appdev/comm/hub",["appdev/ad","js/OpenAjax"],function(){"undefined"==typeof AD.comm&&(AD.comm={}),AD.comm.hub={},AD.comm.hub.publish=function(u,b){OpenAjax.hub.publish(u,b)},AD.comm.hub.subscribe=function(u,b){return OpenAjax.hub.subscribe(u,b)},AD.comm.hub.unsubscribe=function(u){OpenAjax.hub.unsubscribe(u)}});
/*appdev/sal/web-jquery*/
define("appdev/sal/web-jquery",["appdev/comm/hub"],function(){"undefined"==typeof AD.sal&&(AD.sal={}),AD.sal.Deferred=function(){return AD.ui.jQuery.Deferred()},AD.sal.http=function(e){return AD.ui.jQuery.ajax(e)},AD.sal.parseJSON=function(e){return AD.ui.jQuery.parseJSON(e)},AD.sal.setImmediate=function(e){setTimeout(e,0)}});
/*appdev/comm/pending*/
define("appdev/comm/pending",["appdev/ad"],function(){"undefined"==typeof AD.comm&&(AD.comm={});var e=[],n=function(e){AD.sal.setImmediate(function(){e.request(e.opts,function(n,d){e.cb&&e.cb(n,d),e.dfd&&(n?e.dfd.reject(n):e.dfd.resolve(d))})})};AD.comm.pending={add:function(n){e.push(n)},process:function(){for(var d;d=e.shift();)n(d)}}});
/*appdev/widgets/ad_icon_busy/ad_icon_busy*/
define("appdev/widgets/ad_icon_busy/ad_icon_busy",["can/can","appdev/widgets/ad_icon_busy/ad_icon_busy.css!$css"],function(){AD.widgets.ad_icon_busy=can.Control.extend({init:function(i,s){this.options=AD.defaults({width:16,height:16,inline:!0,show:!1,style:"circleball",color:"black"},s),this.div=null,this.element.is("div")?this.div=this.element:(this.div=$("<div>"),this.element.append(this.div)),this.div.addClass("hidden");var o="ad-icon-busy",t=o,n={circleball:{black:1,white:1},arrow:{black:1,white:1},circle:{grey:1}};if(n[this.options.style])if(t+="-"+this.options.style,n[this.options.style][this.options.color])t+="-"+this.options.color;else{console.warn("ad_icon_busy: unknown color:"+this.options.color);var e="";for(var d in n[this.options.style])if(""==e){e=d;break}console.warn("defaulting to color:"+d),t+="-"+d}else console.warn("ad_icon_busy: unknown style:"+this.options.style),t+="-circleball-black";this.div.hasClass(o)||this.div.addClass(o),this.options.inline&&this.div.addClass(o+"-inline"),this.div.addClass(t),this.options.show&&(this.div.show(),this.div.removeClass("hidden"))},show:function(){this.div.removeClass("hidden")},hide:function(){this.div.addClass("hidden")}})});
/*appdev/widgets/ad_ui_reauth/reauth_local.ejs!can/view/ejs/system*/
define("appdev/widgets/ad_ui_reauth/reauth_local.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("appdev/widgets/ad_ui_reauth/reauth_local.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('<div>\n    <div id="appDev-formLogin" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" aria-labelledby="">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h4 class="modal-title" translate=1>Re-login required</h4>\n                    <div class="busy-icon"></div>\n                </div>\n                <div class="modal-body">\n                    <form role="form">\n                      <div class="form-group">\n                        <label for="username" translate=1>Username</label>\n                        <input type="text" class="form-control" id="username">\n                      </div>\n                      <div class="form-group">\n                        <label for="password" translate=1>Password</label>\n                        <input type="password" class="form-control" id="password">\n                      </div>\n                    </form>\n                    \n                    <div class="alert alert-danger" role="alert">\n                    </div>\n                    \n                </div>\n                \n                <div class="modal-footer">\n                      <button type="button" class="btn btn-default login" translate=1>Submit</button>\n                </div>\n                \n            </div>\n        </div>\n    </div>\n    \n</div>'),___v1ew.join("")}}))});
/*appdev/widgets/ad_ui_reauth/reauth_cas.ejs!can/view/ejs/system*/
define("appdev/widgets/ad_ui_reauth/reauth_cas.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("appdev/widgets/ad_ui_reauth/reauth_cas.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('<div>\n    <div id="appDev-formLogin" class="modal" tabindex="-1" role="dialog" aria-hidden="true" aria-labelledby="">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h4 class="modal-title" translate=1>Re-login required</h4>\n                </div>\n                <div class="modal-body">\n                    <div class="cas"><iframe src="/site/login-done"></iframe></div>\n                    <!-- "/site/login-done" page will call AD.ui.reauth.end() when ready. -->\n                </div>\n            </div>\n        </div>\n    </div>\n    \n</div>'),___v1ew.join("")}}))});
/*appdev/widgets/ad_ui_reauth/ad_ui_reauth*/
define("appdev/widgets/ad_ui_reauth/ad_ui_reauth",["appdev/ad","can/can","appdev/widgets/ad_ui_reauth/ad_ui_reauth.css!$css","appdev/widgets/ad_icon_busy/ad_icon_busy","appdev/widgets/ad_ui_reauth/reauth_local.ejs!can/view/ejs/system","appdev/widgets/ad_ui_reauth/reauth_cas.ejs!can/view/ejs/system"],function(){AD.widgets.ad_ui_reauth=can.Control.extend({init:function(e,t){this.authType=AD.config.getValue("authType");var i;i="local"==this.authType?can.view("/appdev/widgets/ad_ui_reauth/reauth_local.ejs",{}):can.view("/appdev/widgets/ad_ui_reauth/reauth_cas.ejs",{}),this.html=i.firstChild.innerHTML},show:function(){this.element=$(this.html),this.element.find("[translate]").each(function(){AD.controllers.Label.keylessCreate(this)}),"CAS"!=this.authType&&(this.busyIcon=new AD.widgets.ad_icon_busy(this.element.find(".busy-icon"))),this.element.modal({backdrop:"static",keyboard:!1,show:!0})},hide:function(){var e=this.element.get(0).contentWindow;e&&!e.closed&&(e.open("about:blank","_self",""),e.close()),this.element.modal("hide"),this.element.remove()},"button.login click":function(){var e=this;e.busyIcon.show(),e.find(".alert").hide(),AD.comm.service.post({url:"/site/login",data:{username:e.element.find("#username"),password:e.element.find("#password")}}).fail(function(t){t=t||{};var i=t.message||"Error";e.find(".alert").text(i).show()}).done(function(){AD.ui.reauth.end()}).always(function(){e.busyIcon.hide()})},"#password keypress":function(e,t){(13==e.keyCode||10==e.keyCode||3==e.keyCode)&&this.element.find("button.login").trigger("click")}})});
/*appdev/auth/reauth*/
define("appdev/auth/reauth",["appdev/widgets/ad_ui_reauth/ad_ui_reauth"],function(){"undefined"==typeof AD.ui&&(AD.ui={}),AD.ui.reauth={init:function(){this.reauthenticating=!1,this.widget=new AD.widgets.ad_ui_reauth,this.dfd=null},inProgress:function(){return this.reauthenticating?!0:!1},start:function(){return this.reauthenticating||(this.reauthenticating=!0,this.widget.show(),this.dfd=AD.sal.Deferred()),this.dfd},end:function(){this.reauthenticating=!1,this.widget.hide(),this.dfd.resolve()}},AD.ui.reauth.init()});
/*appdev/comm/service*/
define("appdev/comm/service",["appdev/ad","appdev/sal/web-jquery","appdev/comm/pending","appdev/auth/reauth"],function(){!function(){var e={token:null,fetch:function(){var t=AD.sal.Deferred();return AD.sal.http({type:"GET",url:"/csrfToken",dataType:"json",cache:!1}).done(function(o,n,r){e.token=o._csrf,t.resolve(e.token)}).fail(function(e,o,n){var r=new Error("Unable to get CSRF token: "+n.message);console.log(r),t.reject(r)}),t}};"undefined"==typeof AD.comm&&(AD.comm={}),AD.comm.csrf=function(){var t=AD.sal.Deferred();return e.token?t.resolve(e.token):e.fetch().done(function(){t.resolve(e.token)}).fail(t.reject),t},AD.comm.service={},AD.comm.service.get=function(e,t){return e.method="GET",o(e,t)},AD.comm.service.post=function(e,t){return e.method="POST",o(e,t)},AD.comm.service.put=function(e,t){return e.method="PUT",o(e,t)},AD.comm.service["delete"]=function(e,t){return e.method="DELETE",o(e,t)};var t=function(e,t,n){return{request:o,opts:e,cb:t,dfd:n}},o=function(n,r){var a=AD.sal.Deferred(),c=!0;return n.sync&&(c=!1),n.method=n.method||"POST",!n.params&&n.data&&(n.params=n.data),e.token||"GET"==n.method?AD.ui.reauth.inProgress()?(AD.comm.pending.add(t(n,r,a)),a):(AD.sal.http({async:c,url:n.url,type:n.method,contentType:n.contentType,dataType:"json",data:n.params,headers:{"X-CSRF-Token":e.token},cache:!1}).fail(function(c,s,u){if(-1!=c.responseText.toLowerCase().indexOf("csrf"))return e.token=null,void o(n,r).done(a.resolve).fail(a.reject);var d=AD.sal.parseJSON(c.responseText);return"object"==typeof d&&null!=d&&"undefined"!=typeof d.status?void AD.comm.error(d,t(n,r,a)):(AD.comm.hub.publish("ad.err.notification",d),r&&r(d),void a.reject(d))}).done(function(e,o,c){return e.status&&"error"==e.status?void AD.comm.error(e,t(n,r,a)):(e.status&&"success"==e.status&&(e=e.data),r&&r(null,e),a.resolve(e),void 0)}),a):(e.fetch().done(function(){o(n,r).done(a.resolve).fail(a.reject)}).fail(a.reject),a)}}()});
/*appdev/error/log*/
define("appdev/error/log",["appdev/ad","appdev/sal/web-jquery","appdev/comm/service"],function(){"undefined"==typeof AD.error&&(AD.error={}),AD.error.log=function(e,r){console.error(e,r)}});
/*appdev/util/uuid*/
define("appdev/util/uuid",["module","@loader"],function(e,l){l.get("@@global-helpers").prepareGlobal(e.id,[]);var i=l.global.define,u=l.global.require,o='"undefined"==typeof AD.util&&(AD.util={}),"undefined"==typeof AD.util.uuid&&!function(){var u=0;AD.util.uuid=function(){return++u}}();';return l.global.define=void 0,l.global.module=void 0,l.global.exports=void 0,l.__exec({source:o,address:e.uri}),l.global.require=u,l.global.define=i,l.get("@@global-helpers").retrieveGlobal(e.id,void 0)});
/*appdev/util/async*/
define("appdev/util/async",["js/async"],function(n){"undefined"==typeof AD.util&&(AD.util={}),"undefined"==typeof AD.util.async&&!function(){AD.util.async=n}()});
/*appdev/util/string*/
define("appdev/util/string",["module","@loader"],function(e,l){l.get("@@global-helpers").prepareGlobal(e.id,[]);var i=l.global.define,r=l.global.require,o='"undefined"==typeof AD.util&&(AD.util={}),"undefined"==typeof AD.util.string&&!function(){AD.util.string={replaceAll:function(e,t,n){var u=new RegExp(AD.util.string.quoteRegExp(t),"g");return e.replace(u,n)},quoteRegExp:function(e){return e.replace(/([.?*+^$[\\]\\\\(){}-])/g,"\\\\$1")}}}();';return l.global.define=void 0,l.global.module=void 0,l.global.exports=void 0,l.__exec({source:o,address:e.uri}),l.global.require=r,l.global.define=i,l.get("@@global-helpers").retrieveGlobal(e.id,void 0)});
/*appdev/config/config*/
define("appdev/config/config",["module","@loader"],function(e,o){o.get("@@global-helpers").prepareGlobal(e.id,[]);var l=o.global.define,n=o.global.require,i='!function(){"undefined"==typeof AD.config&&(AD.config={});var n={};AD.config.setValue=function(f,e){n[f]=e},AD.config.getValue=function(f){if(!n[f])return!1;var e=n[f];return e}}();';return o.global.define=void 0,o.global.module=void 0,o.global.exports=void 0,o.__exec({source:i,address:e.uri}),o.global.require=n,o.global.define=l,o.get("@@global-helpers").retrieveGlobal(e.id,void 0)});
/*appdev/util/uiScrollbarSize*/
define("appdev/util/uiScrollbarSize",["module","@loader"],function(e,l){l.get("@@global-helpers").prepareGlobal(e.id,[]);var o=l.global.define,i=l.global.require,r='"undefined"==typeof AD.util&&(AD.util={}),"undefined"==typeof AD.util.uiScrollbarSize&&!function(){var e=null;AD.util.uiScrollbarSize=function(){if(null==e){var o={border:"none",height:"200px",margin:"0",padding:"0",width:"200px"},t=$("<div>").css($.extend({},o)),l=$("<div>").css($.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},o)).append(t).appendTo("body").scrollLeft(1e3).scrollTop(1e3);e={height:l.offset().top-t.offset().top||0,width:l.offset().left-t.offset().left||0},l.remove()}return console.error("**** returning scrollbar info: ",e),e}}();';return l.global.define=void 0,l.global.module=void 0,l.global.exports=void 0,l.__exec({source:r,address:e.uri}),l.global.require=i,l.global.define=o,l.get("@@global-helpers").retrieveGlobal(e.id,void 0)});
/*appdev/config/data*/
define("appdev/config/data",["appdev/config/config"],function(){var a={authType:"CAS"};for(var n in a)AD.config.setValue(n,a[n])});
/*appdev/comm/error*/
define("appdev/comm/error",["appdev/ad","appdev/comm/hub","appdev/comm/pending","appdev/auth/reauth"],function(){"undefined"==typeof AD.comm&&(AD.comm={}),AD.comm.error=function(e,d){var o=e.id;5==o?(AD.comm.pending.add(d),AD.ui.reauth.start().done(function(){AD.comm.pending.process()})):(AD.comm.hub.publish("ad.err.notification",e),d.cb&&d.cb(e),d.dfd.reject(e))}});
/*appdev/comm/socket*/
define("appdev/comm/socket",["appdev/ad","appdev/sal/web-jquery","appdev/comm/error","js/dependencies/sails.io"],function(){"undefined"==typeof AD.comm&&(AD.comm={}),AD.comm.socket={},AD.comm.socket.get=function(e,o){return e.method="get",c(e,o)},AD.comm.socket.post=function(e,o){return e.method="post",c(e,o)},AD.comm.socket.put=function(e,o){return e.method="put",c(e,o)},AD.comm.socket["delete"]=function(e,o){return e.method="delete",c(e,o)},AD.comm.socket.subscribe=function(n,c){var a=n.split("."),u=a[0].toLowerCase(),m="_all";return a[1]&&(m=a[1].toLowerCase()),e[u]||(e[u]={_all:[]}),e[u][m]?e[u][m].push(c):e[u][m]=[c],o[u]||("undefined"!=typeof io&&io.socket.on(u,function(e){r(u,e)}),o[u]=!0),t++,s[t]={message:e[u],verb:m,cb:c},t};var e={},o={},t=0,s={},r=function(o,t){if(console.log("...AD.comm.socket: process message:"),console.log("... message:"+o),console.log("... data:",t),e[o]){var s=o+"."+t.verb,r=e[o];r._all.forEach(function(e){e(s,t)});var n=[];for(var c in t)n.push(t[c]);for(var a in r){var u=o+"."+a;if(-1!=n.indexOf(a)&&r[a].forEach(function(e){e(u,t)}),AD.ui.jQuery.isNumeric(a)){var m=parseFloat(a);-1!=n.indexOf(m)&&r[a].forEach(function(e){e(u,t)})}}}},n=function(e,o,t){return{request:c,opts:e,cb:o,dfd:t}},c=function(e,o){var t=AD.sal.Deferred();return e.method||(e.method="post"),AD.ui.reauth.inProgress()?(AD.comm.pending.add(n(e,o,t)),t):("undefined"!=typeof io&&io.socket[e.method](e.url,e.params,function(s,r){console.log("AD.comm.socket."+e.method+"() response:"),console.log(s),console.log("jwres:"),console.log(r),"string"==typeof s&&(s=JSON.parse(s)),r.statusCode>=400?AD.comm.error(s,n(e,o,t)):s.status&&"error"==s.status?AD.comm.error(s,n(e,o,t)):(s.status&&"success"==s.status&&(s=s.data),o&&o(null,s),t.resolve(s))}),t)}});
/*appdev/model/model*/
define("appdev/model/model",["appdev/comm/hub","appdev/comm/socket"],function(){"undefined"==typeof AD.Model&&(AD.Model={Base:{extend:function(r,i,l){var d=c(AD.models_base,r),u=s(r);i.findAll=e(i.findAll),i.findOne=n(i.findOne),i.create=t(i.create),i.update=o(i.update),i.destroy=a(i.destroy);var f={model:function(){return this.__myModel||(this.__myModel=AD.Model.get(r)),this.__myModel},getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||"unknown label field"}};i.multilingualFields&&(f.translate=function(e){var n=this;e=e||AD.lang.currentLanguage;var t=this.model().multilingualFields;this.translations&&this.translations.forEach(function(r){r.language_code==e&&t.forEach(function(e){n.attr(e,r[e])})})}),l=$.extend({},f,l),d[u]=can.Model.extend(i,l)},get:function(e){return l(AD.models_base,e)}},clone:function(e){if(e.model){for(var n=e.model(),t=e.attr(),r=["id","createdAt","updatedAt"],o=r.length-1;o>=0;o--)t[r[o]]&&delete t[r[o]];return t.translations&&t.translations.forEach(function(e){for(var t=r.length-1;t>=0;t--)delete e[r[t]];if(n.multilingualFields)for(var o in e)"language_code"!=o&&-1==n.multilingualFields.indexOf(o)&&delete e[o]}),t}return console.warn("**** Using AD.Model.clone() on a model without a .model() method!  why?"),e.attr?e.attr():null},extend:function(e,n,t){var r=c(AD.models,e),o=s(e);r[o]=AD.Model.Base.get(e).extend(n,t),AD.comm.socket.subscribe(o,function(n,t){console.log("modelName:"+o),console.log("socket: message["+n+"] "),console.log(t),console.log("............................"),d(e,t)})},get:function(e){return l(AD.models,e)}});var e=function(e){if(e){var n=e.split(" "),t=n[0].toLowerCase(),r=n.pop();if(AD.comm.service[t])return function(e,n,o){var a=AD.sal.Deferred();console.log("... convertFindAll:fn(): this.useSockets:",this.useSockets);var i="service";return this.useSockets&&(i="socket"),AD.comm[i][t]({url:r,params:e}).fail(function(e){o&&o(e),a.reject(e)}).done(function(e){e=e.data||e,can.isArray(e)||(e=[e]);var t={data:e};n&&n(t),a.resolve(t)}),a};console.error("improper findAll verb:"+t)}return e},n=function(e){if(e){var n=e.split(" "),t=n[0].toLowerCase(),r=n.pop();if(AD.comm.service[t])return function(e,n,o){var a=AD.sal.Deferred(),i=r;for(var l in e){var s=i;i=AD.util.string.replaceAll(i,"{"+l+"}",e[l]),s!=i&&delete e[l]}return AD.comm.service[t]({url:i,params:e}).fail(function(e){o&&o(e),a.reject(e)}).done(function(e){e=e.data||e,n&&n(e),a.resolve(e)}),a};console.error("improper findAll verb:"+t)}return e},t=function(e){if(e){var n=e.split(" "),t=n[0].toLowerCase(),r=n.pop();if(AD.comm.service[t])return function(e,n,o){var a=AD.sal.Deferred();return e=i(e,this),AD.comm.service[t]({url:r,params:e}).fail(function(e){o&&o(e),a.reject(e)}).done(function(e){e=e.data||e,n&&n(e),a.resolve(e)}),a};console.error("improper findAll verb:"+t)}return e},r=function(e,n){var t=AD.sal.Deferred(),r=e+"/"+n;return AD.comm.service.get({url:r}).fail(function(e){t.reject(e)}).done(function(e){var n=[];e.forEach(function(e){var t=r+"/"+e.id;n.push(AD.comm.service["delete"]({url:t}))}),$.when.apply($,n).fail(function(e){t.reject(e)}).done(function(){t.resolve()})}),t},o=function(e){if(e){var n=e.split(" "),t=n[0].toLowerCase(),o=n.pop();if(AD.comm.service[t])return function(e,n,a,l){var s=this,c=AD.sal.Deferred(),d="{"+this.fieldId+"}",u=AD.util.string.replaceAll(o,d,e);return console.log("... provided attributes:",n),n=i(n,this),AD.comm.service[t]({url:u,params:n}).fail(function(e){l&&l(e),c.reject(e)}).done(function(e){e=e.data||e;var t=[];s.associations&&s.associations.forEach(function(o){n[o]&&0==n[o].length&&(t.push(r(u,o)),e.attr?e.attr(o,n[o]):e[o]=n[o])}),$.when.apply($,t).fail(function(e){l&&l(e),c.reject(e)}).done(function(){a&&a(e),c.resolve(e)})}),c};console.error("improper findAll verb:"+t)}return e},a=function(e){if(e){var n=e.split(" "),t=n[0].toLowerCase(),r=n.pop();if(AD.comm.service[t])return function(e){var n=AD.sal.Deferred(),o="{"+this.fieldId+"}",a=AD.util.string.replaceAll(r,o,e);return AD.comm.service[t]({url:a,params:{}}).fail(function(e){n.reject(e)}).done(function(e){e=e.data||e,n.resolve(e)}),n};console.error("improper findAll verb:"+t)}return e},i=function(e,n){var t=n.multilingualFields;if(t){var r=e.language_code||AD.lang.currentLanguage,o=function(){var n={};n.language_code=r,t.forEach(function(t){e[t]&&(n[t]=e[t])}),e.translations.push(n)},a=e.translations;if(a){var i=!1;a.forEach(function(n){n.language_code==r&&(i=!0,t.forEach(function(t){e[t]&&(n.attr?n.attr(t,e[t]):n[t]=e[t])}))}),i||o()}else e.translations=[],o()}return e},l=function(e,n){var t=n.split("."),r=e;return t.forEach(function(e){if(null==r){console.error("! current name segment is null.  Check your given name to make sure it is properly given: ",e)}r&&("undefined"==typeof r[e]&&(r=null),r&&(r=r[e]))}),r},s=function(e){var n=e.split("."),t=n.pop();return t},c=function(e,n){var t=n.split("."),r=(t.pop(),e);return t.forEach(function(e){"undefined"==typeof r[e]&&(r[e]={}),r=r[e]}),r},d=function(e,n){var t=l(AD.models,e);if(t)if(t.store[n.id])if("updated"==n.verb){var r=t.store[n.id].attr(),o=!1;for(var a in n.data)r[a]!=n.data[a]&&(o=!0);o&&(t.store[n.id].attr(n.data),can.event.dispatch.call(t,"updated",[t.store[n.id]]))}else"destroyed"==n.verb?(t.store[n.id].destroyed(),can.event.dispatch.call(t,"destroyed",[t.store[n.id]])):can.event.dispatch.call(t,n.verb,[n]);else"created"==n.verb?(new t(n.data),t.store[n.id]?console.log("model added and stored!"):console.log("model added but NOT stored!")):"updated"==n.verb?console.log("... ModelUpdate():  received an update about a Model we are not tracking.  IGNORE."):can.event.dispatch.call(t,n.verb,[n]);else console.log("!!!  No Model found with namespace:"+e)}});
/*appdev/labels/lang*/
define("appdev/labels/lang",["module","@loader"],function(e,a){a.get("@@global-helpers").prepareGlobal(e.id,[]);var n=a.global.define,t=a.global.require,l='!function(){AD.lang={},AD.lang.currentLanguage="en";var e=null,n=null;AD.lang.list=function(){var a=AD.sal.Deferred();if(e)a.resolve(e);else{var t=function(){e={};for(var a in n){var t=n[a];e[t.language_code]=t.language_label}};AD.comm.socket.get({url:"/appdev-core/sitemultilinguallanguage"}).fail(function(e){AD.error.log("Unable to request SiteMultilingualLanguage information.",e),a.reject(e)}).then(function(l){n={},l.forEach(function(e){n[e.id]=e}),t(),a.resolve(e)}),AD.comm.socket.subscribe("sitemultilinguallanguage",function(e,a){switch(a.verb){case"created":case"updated":n[a.id]=a.data;break;case"destroyed":delete n[a.id]}t()})}return a},AD.lang.setCurrentLanguage=function(e){AD.lang.currentLanguage=e},AD.lang.label={};var a={},t={},l=function(e){t[e]||("object"==typeof console&&console.log("Warning: language not found ["+e+"]"),t[e]=!0)};AD.lang.label.setLabel=function(e,n,t){t=t||AD.lang.currentLanguage,a[t]||(a[t]={}),a[t][e]=n},AD.lang.label.importLabels=function(e){for(var n in e)for(var a in e[n])AD.lang.label.setLabel(a,e[n][a],n)},AD.lang.label.getLabel=function(e,n,t){if("object"==typeof e&&(e=e.key),"[object Array]"!=Object.prototype.toString.call(n)&&(t=n,n=[]),t=t||AD.lang.currentLanguage,!a[t])return l(t),!1;if(!a[t][e])return!1;var r=a[t][e]||e;for(r=r.replace(/%%/g,"\\\\%\\\\");n.length&&r.match(/%s/);)r=r.replace(/%s/,n.shift());return r=r.replace(/\\\\%\\\\/g,"%")},AD.lang.label.getLabelSpan=function(e,n,a){var t="";"object"==typeof e&&(e=e.key,t=e.context);var l=AD.lang.label.getLabel(e,n,a),r="",o="";return""!=t&&(o=AD.controllers.Label.constants.keyAttribute+\'="\'+t+\'"\'),r=l?"<span "+AD.controllers.Label.constants.keyAttribute+\'="\'+e+\'" \'+o+" >"+l+"</span>":"<span "+AD.controllers.Label.constants.keyAttribute+\'="\'+e+\'" \'+o+">"+e+"</span>"},AD.lang.label.translate=function(e){var n=AD.controllers.Label.constants.keyAttribute,a=e.find("["+n+"]"),t=[];return a.each(function(){t.push(new AD.controllers.Label($(this)))}),t}}();';return a.global.define=void 0,a.global.module=void 0,a.global.exports=void 0,a.__exec({source:l,address:e.uri}),a.global.require=t,a.global.define=n,a.get("@@global-helpers").retrieveGlobal(e.id,void 0)});
/*appdev/labels/label*/
define("appdev/labels/label",["can/can"],function(){var t=can.Control.extend({constants:{keyAttribute:"app-label-key",langAttribute:"app-label-lang",cssClass:"app-label",jQueryData:"AD-Label"},keylessCreate:function(t){t.html||(t=$(t));var s=t.html();return t.attr(this.constants.keyAttribute,s),this.create(t)},create:function(s){var a=new t(s);return a},transform:function(t){var s=$("<span>");return t.empty(),t.append(s),t.addClass(this.constants.cssClass),s},defaults:{},collection:[],translateAll:function(t){$.each(this.collection,function(){this.translate(t)})}},{init:function(t){this.labelKey=t.attr(this.constructor.constants.keyAttribute),this.labelKey&&!t.hasClass(this.constructor.constants.cssClass)&&(this.$span=this.constructor.transform(t),this.constructor.collection.push(this),t.data(this.constructor.constants.jQueryData,this),this.translate())},destroy:function(){var t=this.constructor.collection.indexOf(this);t>=0&&this.constructor.collection.splice(t,1),can.Control.prototype.destroy.call(this)},translate:function(t){t=t||AD.lang.currentLanguage;var s=AD.lang.label.getLabel(this.labelKey,t);s===!1&&(s="["+this.labelKey+"]"),this.$span.html(s),this.element.attr(this.constructor.constants.langAttribute,t)},"AD.label.translate subscribe":function(t){this.translate(t)}});AD.controllers.Label=t});
/*appdev/UIController*/
define("appdev/UIController",["jquery","can/can"],function(){AD.classes.UIController=can.Control.extend({},{domToString:function(n){return $("<div>").append(n.clone()).html()},domToTemplate:function(n){0==n.length&&console.error("domToTemplate(): no $el found. "),n.find(".mockup").remove();var e=n.html();if(""!=e){var t=[{from:"<!--",to:"<%"},{from:"-->",to:"%>"},{from:"[[=",to:"<%="},{from:"[[-",to:"<%=="},{from:"]]",to:"%>"}];t.forEach(function(n){e=AD.util.string.replaceAll(e,n.from,n.to)}),e=e.replace(/obj-embed="(\w+)"/g,function(n,e){return"<%= (el) -> can.data(el, '"+e+"', "+e+") %>"})}return e},entryForID:function(n,e){e=parseInt(e);for(var t=n.length-1;t>=0;t--)if(n[t].id&&n[t].id==e)return n[t];return null},indexForID:function(n,e){var t=this.entryForID(n,e);return t?n.indexOf(t):-1},hide:function(){this.element.hide()},show:function(){this.element.show()},init:function(n){},translateLabels:function(n){$.each(this.labels,function(){this.translate(n)})}})});
/*appdev/control/control*/
define("appdev/control/control",["appdev/UIController"],function(){"undefined"==typeof AD.Control&&(AD.Control={extend:function(n,o,e){var t=n.split("."),r=t.pop(),l=AD.controllers;t.forEach(function(n){"undefined"==typeof l[n]&&(l[n]={}),l=l[n]}),l[r]=AD.classes.UIController.extend(o,e)},get:function(o){return n(AD.controllers,o)},"new":function(o,e,t){var r=n(AD.controllers,o);new r(e,t)}});var n=function(n,o){var e=o.split("."),t=n;return e.forEach(function(n){"undefined"==typeof t[n]&&(t=null),t&&(t=t[n])}),t}});
/*[global-shim-end]*/
!function(){window._define=window.define,window.define=window.define.orig}();